import { Maya } from "@icon-park/svg"
import * as mars3d from "mars3d"
import { useWidget } from "@mars/common/store/widget"
/**
 * 初始化地图业务，生命周期钩子函数（必须）
 * 框架在地图初始化完成后自动调用该函数
 * @param {mars3d.Map} mapInstance 地图对象
 * @returns {void} 无
 */
import { useTestStore } from "@/store/index"
let insarPoints
export let graphicLayer
export let map
export const eventTabel = new mars3d.BaseClass()
const { activate, disable, isActivate, updateWidget } = useWidget()
const Test = useTestStore()
export function onMounted(mapInstance) {
  map = mapInstance
  map.flyToPoint([118.542203984638, 31.60508348261099], { pitch: -27, radius: 10000, heading: 30, roll: 90 })

  /// /////////insar points
  const insar = map.getLayer(1002)
  // const insarPoints = map.getLayer(1000)
  const insarjy11 = map.getLayerById(20221)
  insarjy11.show = true
  map.addLayer(insarjy11)
  // insarPoints.show = true

  insar.show = false
  map.eachLayer((e) => {
    if (e.id === 10001 || e.id === 10005) {
      e.show = false
    }
  })
  // map.eachLayer((e) => {
  //   if (e.id === 10005) {
  //     e.show = true
  //   }
  // })
  // map.eachLayer((e) => {
  //   if (e.id === 20221) {
  //     e.show = true
  //   }
  // })
  //
  // map.addLayer(insar)
  graphicLayer = new mars3d.layer.GraphicLayer()
  map.addLayer(graphicLayer)
  const graphicLayer2 = map.getLayer(1000, "id")
  map.addLayer(graphicLayer2)
  // graphicLayer = map.getLayer(1002, "id")
  console.log("123123", graphicLayer)
  // add1(graphicLayer)
  // add1(graphicLayer)

  add(
    graphicLayer,
    [
      [118.4767066682902, 31.37026047597006, 0],
      [118.477640074624, 31.37133185795818, 0],
      [118.4783304833425, 31.37250722145412, 0],
      [118.4786609883729, 31.37291100064855, 0],
      [118.4799516044269, 31.37326574917685, 0],
      [118.4811370512969, 31.37325977932106, 0],
      [118.4814602759677, 31.3725058688603, 0],
      [118.4814867828282, 31.37234602851365, 0],
      [118.4815334207739, 31.37082922191879, 0],
      [118.481530592503, 31.37064191607833, 0],
      [118.4815126595989, 31.37054770849216, 0],
      [118.4815599129684, 31.36984058812117, 0],
      [118.48179801317, 31.36797018195201, 0],
      [118.4817108275861, 31.36790588977038, 0],
      [118.481263988079, 31.36746512835334, 0],
      [118.4812516678007, 31.36734544934921, 0],
      [118.4806230507703, 31.36648588415716, 0],
      [118.4804046060666, 31.36644543876238, 0],
      [118.4788524978907, 31.36593240004159, 0],
      [118.4787147525415, 31.36580914432997, 0],
      [118.4782636261239, 31.36564232976599, 0],
      [118.4776425533435, 31.3655259585563, 0],
      [118.4766636378003, 31.36513049928309, 0],
      [118.474844553382, 31.36435328855277, 0],
      [118.4737465383453, 31.36412860250695, 0],
      [118.4730884876133, 31.36461410983425, 0],
      [118.4720811627835, 31.36621503067528, 0],
      [118.4728699182083, 31.36738913997636, 0],
      [118.4746108782577, 31.36888919084459, 0],
      [118.4760245606249, 31.36954274415424, 0],
      [118.4767066682902, 31.37026047597006, 0]
    ],
    1,
    "K70+800~K71+800",
    "15mm",
    "沉降较缓",
    1,
    "K55+000~K55+500"
  )

  addlx(
    graphicLayer,
    [
      [118.4743931136167, 31.37336369974967, 0],
      [118.4742196050977, 31.37249061142764, 0],
      [118.4740099684909, 31.37144268902205, 0],
      [118.4737103274936, 31.36980230500466, 0],
      [118.4735288279702, 31.36844486277722, 0],
      [118.473217628955, 31.36657890600346, 0],
      [118.4729954765446, 31.36516554559228, 0]
    ],
    11,
    "K70+800~K71+800"
  )
  addstart(graphicLayer, [118.4743931136167, 31.37336369974967], "k70+800")
  addstart(graphicLayer, [118.4729954765446, 31.36516554559228, 0], "k71+800")
  // add1lx(graphicLayer)
  // add1start(graphicLayer)
  // add1end(graphicLayer)
  // add2(graphicLayer)
  // add3(graphicLayer)
  add(
    graphicLayer,
    [
      [118.5321176319821, 31.56023965210957, 0],
      [118.5324670162442, 31.56043763359188, 0],
      [118.5328139373292, 31.56050034514234, 0],
      [118.5330645553996, 31.56048051975937, 0],
      [118.533364728269, 31.56058664708748, 0],
      [118.5337019372665, 31.56054778291598, 0],
      [118.5338770397422, 31.56042596375001, 0],
      [118.5340152591774, 31.56008095415184, 0],
      [118.5340171910547, 31.56005229156346, 0],
      [118.5339893733308, 31.55974534644461, 0],
      [118.5339935591984, 31.55968381993357, 0],
      [118.5339985723862, 31.55939973975598, 0],
      [118.5339930920217, 31.55938025617272, 0],
      [118.5339884626109, 31.55934791727155, 0],
      [118.5339548817832, 31.55895867631488, 0],
      [118.5339570535847, 31.55892743481094, 0],
      [118.5339460719528, 31.55889606493604, 0],
      [118.5339346980478, 31.55887094208645, 0],
      [118.5339176902483, 31.55883337256074, 0],
      [118.5339029306826, 31.55867870883251, 0],
      [118.5338931114548, 31.55863578313362, 0],
      [118.5338676575543, 31.55846450367415, 0],
      [118.5338577324883, 31.55842795904788, 0],
      [118.5337953109646, 31.5582534771278, 0],
      [118.5337637159412, 31.55824782563676, 0],
      [118.5336306905248, 31.55816502439071, 0],
      [118.533606297268, 31.55815326666891, 0],
      [118.5335195176681, 31.55812480923006, 0],
      [118.5331281921992, 31.55802749191682, 0],
      [118.5324918260715, 31.5582542698654, 0],
      [118.5322849098235, 31.55857535273385, 0],
      [118.532071779464, 31.55882498829669, 0],
      [118.5319235034391, 31.55908982468596, 0],
      [118.5318568277059, 31.5593319334261, 0],
      [118.5318632392663, 31.5595469746195, 0],
      [118.5319983853985, 31.55956643833792, 0],
      [118.532067858054, 31.55985854615847, 0],
      [118.5321273469724, 31.55995540998253, 0],
      [118.5321176319821, 31.56023965210957, 0]
    ],
    2,
    "K49+000~K49+200",
    "10mm",
    "沉降较缓",
    2,
    "K49+000~K49+200"
  )

  addlx(
    graphicLayer,
    [
      [118.5315799118712, 31.56025315204923, 0],
      [118.5315028442681, 31.55934809818105, 0],
      [118.5314856559701, 31.55844722560507, 0]
    ],
    22,
    "K49+000~K49+200"
  )
  addstart(graphicLayer, [118.5315799118712, 31.56025315204923, 0], "k49+000")
  addstart(graphicLayer, [118.5314856559701, 31.55844722560507, 0], "k49+200")

  add(
    graphicLayer,
    [
      [118.5315909627607, 31.56009813561176, 0],
      [118.5318332230973, 31.56051081197243, 0],
      [118.5331935644704, 31.56048348806352, 0],
      [118.534113298897, 31.56068896908725, 0],
      [118.5350938442698, 31.56108875191573, 0],
      [118.5359142552798, 31.56139180766858, 0],
      [118.537217414558, 31.56164487692675, 0],
      [118.5383961537579, 31.56148218527066, 0],
      [118.5386009658681, 31.55981015195912, 0],
      [118.5379688342314, 31.55931877554666, 0],
      [118.537879314288, 31.5592404695043, 0],
      [118.536405223897, 31.55925377791069, 0],
      [118.5350490926801, 31.55946269747436, 0],
      [118.5344483801485, 31.5589492022048, 0],
      [118.5339985014295, 31.55826048995254, 0],
      [118.5332582115943, 31.55778411783783, 0],
      [118.5324221821943, 31.55831186569063, 0],
      [118.5316009644603, 31.55918486877666, 0],
      [118.5315909627607, 31.56009813561176, 0]
    ],
    3,
    "K48+800~K49+000",
    "3mm",
    "沉降较缓",
    3,
    "K48+800~K49+000"
  )
  addlx(
    graphicLayer,
    [
      [118.5317983477581, 31.56206323882892, 0],
      [118.5316754267895, 31.56117357684127, 0],
      [118.5316785743074, 31.56080595659738, 0],
      [118.5315694892595, 31.56024982220536, 0]
    ],
    33,
    "K48+800~K49+000"
  )
  addstart(graphicLayer, [118.5317983477581, 31.56206323882892, 0], "K48+800")
  addstart(graphicLayer, [118.5315694892595, 31.56024982220536, 0], "K49+000")

  add(
    graphicLayer,
    [
      [118.5377955953449, 31.60632676135024, 0],
      [118.5375667321769, 31.60774091449005, 0],
      [118.537405200348, 31.60806176063276, 0],
      [118.5373118923561, 31.60832993809186, 0],
      [118.5376415474683, 31.60836213903408, 0],
      [118.5380200922142, 31.60869762312234, 0],
      [118.538370340674, 31.6087681343447, 0],
      [118.5387860890698, 31.60909268543498, 0],
      [118.5393851272117, 31.60895387468528, 0],
      [118.5400066463017, 31.60894683744352, 0],
      [118.5402388683983, 31.60902964198424, 0],
      [118.5403843703344, 31.60946713084405, 0],
      [118.5407688476, 31.6097213207989, 0],
      [118.540975843987, 31.61011639510657, 0],
      [118.541332850809, 31.61052728137813, 0],
      [118.5420144870822, 31.61081648540154, 0],
      [118.5428329221667, 31.61094972009739, 0],
      [118.5433871761503, 31.61037497140285, 0],
      [118.5433909685247, 31.61033904673856, 0],
      [118.5433675204266, 31.60940706937529, 0],
      [118.5433378647755, 31.60937331921225, 0],
      [118.5429753101456, 31.60856004894362, 0],
      [118.5429451406779, 31.60852972095374, 0],
      [118.5422683109057, 31.6080805579239, 0],
      [118.542173307257, 31.6080387735039, 0],
      [118.5421135657065, 31.60799297436992, 0],
      [118.5415263278918, 31.60761713875214, 0],
      [118.5414691655178, 31.60755716503273, 0],
      [118.5412345416191, 31.6073651517374, 0],
      [118.5409788512234, 31.60669205424454, 0],
      [118.5410773962152, 31.60590706681753, 0],
      [118.5407455971634, 31.60518612924879, 0],
      [118.5396091041573, 31.60492726338549, 0],
      [118.5386305527418, 31.60470578515717, 0],
      [118.5380226169352, 31.60499950158875, 0],
      [118.5376338319688, 31.60511670563383, 0],
      [118.5375711866938, 31.60583579165322, 0],
      [118.5377955953449, 31.60632676135024, 0]
    ],
    4,
    "K43+400~K44+000",
    "2mm",
    "沉降较缓",
    4,
    "K43+400~K44+000"
  )
  addlx(
    graphicLayer,
    [
      [118.5360715994478, 31.61044885986734, 0],
      [118.5363039851008, 31.6096688812229, 0],
      [118.5365114678847, 31.60886426133127, 0],
      [118.5367894962245, 31.60781873290993, 0],
      [118.5370001127862, 31.60689568164982, 0],
      [118.537201864852, 31.60611002562693, 0],
      [118.5375421817464, 31.60484354153214, 0]
    ],
    44,
    "K43+400~K44+000"
  )
  addstart(graphicLayer, [118.5360715994478, 31.61044885986734, 0], "K43+400")
  addstart(graphicLayer, [118.5375421817464, 31.60484354153214, 0], "K44+000")

  add(
    graphicLayer,
    [
      [118.5369774290666, 31.63057492816573, 0],
      [118.538749885573, 31.63212095927157, 0],
      [118.5398621622311, 31.63192429842074, 0],
      [118.540793959752, 31.63110313941777, 0],
      [118.5405901541615, 31.62920482449309, 0],
      [118.5391693875121, 31.62891288758135, 0],
      [118.5374253172711, 31.62846632849706, 0],
      [118.5368471354521, 31.63024536838164, 0],
      [118.5369774290666, 31.63057492816573, 0]
    ],
    5,
    "K41+000~K41+300",
    "2mm",
    "沉降较缓",
    5,
    "K41+000~K41+300"
  )
  addlx(
    graphicLayer,
    [
      [118.5315423461168, 31.63126232829626, 0],
      [118.5318802630713, 31.63011908947037, 0],
      [118.5321386704631, 31.62911300966119, 0],
      [118.5322613282997, 31.62859237630425, 0]
    ],
    55,
    "K41+000~K41+300"
  )
  addstart(graphicLayer, [118.5315423461168, 31.63126232829626, 0], "K41+000")
  addstart(graphicLayer, [118.5322613282997, 31.62859237630425, 0], "K41+300")

  add(
    graphicLayer,
    [
      [118.5385410204668, 31.63866982723786, 0],
      [118.5392252129542, 31.63656082446898, 0],
      [118.539196103844, 31.63544827689046, 0],
      [118.5387297945776, 31.63460708247159, 0],
      [118.5375270104953, 31.63438220115185, 0],
      [118.5361441659348, 31.6352687179461, 0],
      [118.5361041849996, 31.63647152768216, 0],
      [118.5365102747729, 31.63754272977271, 0],
      [118.5370741805054, 31.63835732904409, 0],
      [118.538000805732, 31.63868219071487, 0],
      [118.5385410204668, 31.63866982723786, 0]
    ],
    6,
    "K40+100~K40+600",
    "2.7mm",
    "沉降较缓",
    6,
    "K40+100~K40+600"
  )
  addlx(
    graphicLayer,
    [
      [118.5301027511745, 31.63916446495036, 0],
      [118.530134098546, 31.63826633168109, 0],
      [118.5301698306249, 31.63727879049447, 0],
      [118.5302398985059, 31.63616207651017, 0],
      [118.5304390480013, 31.63534910545691, 0],
      [118.5306126362167, 31.63479842172847, 0]
    ],
    66,
    "K40+100~K40+600"
  )
  addstart(graphicLayer, [118.5301027511745, 31.63916446495036, 0], "K40+100")
  addstart(graphicLayer, [118.5306126362167, 31.63479842172847, 0], "K40+600")

  /// //////第七段
  add(
    graphicLayer,
    [
      [118.5270772663972, 31.64906191052197, 0],
      [118.5281950330829, 31.64972147126115, 0],
      [118.5293386959411, 31.64952942499812, 0],
      [118.5294168085924, 31.64942960157534, 0],
      [118.5300826004911, 31.64907674918662, 0],
      [118.5301380855248, 31.64895325704945, 0],
      [118.5302757005711, 31.64838229611962, 0],
      [118.5302334594092, 31.64823255173148, 0],
      [118.5301754068272, 31.64793595537305, 0],
      [118.530109984504, 31.64788495726869, 0],
      [118.53002574582, 31.6478081234646, 0],
      [118.5296365260732, 31.64740646755097, 0],
      [118.5294391061222, 31.64737490638181, 0],
      [118.5292291613906, 31.64729459575078, 0],
      [118.5287715121885, 31.64727752659541, 0],
      [118.5276680715282, 31.64754750139947, 0],
      [118.5270934392742, 31.64844072136217, 0],
      [118.5270772663972, 31.64906191052197, 0]
    ],
    7,
    "K39+000~K39+300",
    "2.7mm",
    "沉降较缓",
    7,
    "K39+000~K39+300"
  )
  addlx(
    graphicLayer,
    [
      [118.5320294316755, 31.64902847362811, 0],
      [118.5318395792816, 31.64809849652053, 0],
      [118.5315360522566, 31.64707450600447, 0],
      [118.5314009677851, 31.6463556703324, 0]
    ],
    77,
    "K39+000~K39+300"
  )
  addstart(graphicLayer, [118.5320294316755, 31.64902847362811, 0], "K39+000")
  addstart(graphicLayer, [118.5314009677851, 31.6463556703324, 0], "K39+300")
  /// ////////// 8888888888

  add(
    graphicLayer,
    [
      [118.5419313296793, 31.68158088797832, 0],
      [118.5435641235989, 31.68182749023525, 0],
      [118.5453623953806, 31.67976083717426, 0],
      [118.545382385482, 31.67953994515327, 0],
      [118.5454815531561, 31.67787820365876, 0],
      [118.5454422299847, 31.67777353783192, 0],
      [118.5446176403092, 31.67728727831375, 0],
      [118.5441846106668, 31.67727888816355, 0],
      [118.5439868776704, 31.6773269577565, 0],
      [118.5435003194636, 31.67736886850928, 0],
      [118.5426602361843, 31.67752220968702, 0],
      [118.5424486545082, 31.67767637979505, 0],
      [118.5416626236787, 31.67890928369287, 0],
      [118.5408185232612, 31.67972383935454, 0],
      [118.5405048552718, 31.6806015361437, 0],
      [118.5411204872364, 31.68084007913042, 0],
      [118.5419313296793, 31.68158088797832, 0]
    ],
    8,
    "K35+200~K35+500",
    "2.7mm",
    "沉降较缓",
    8,
    "K35+200~K35+500"
  )
  addlx(
    graphicLayer,
    [
      [118.5394783076444, 31.67902963039446, 0],
      [118.539644517829, 31.6801033759473, 0],
      [118.5397865464545, 31.68121880285864, 0],
      [118.5397477659179, 31.68257313159137, 0]
    ],
    88,
    "K35+200~K35+500"
  )
  addstart(graphicLayer, [118.5394783076444, 31.67902963039446, 0], "K35+200")
  addstart(graphicLayer, [118.5397477659179, 31.68257313159137, 0], "K35+50")

  // 9999999999
  add(
    graphicLayer,
    [
      [118.5390457663999, 31.69265407728168, 0],
      [118.5405699936492, 31.69345157404501, 0],
      [118.5417838035845, 31.69288450200627, 0],
      [118.5418567048629, 31.69260645619772, 0],
      [118.5422622186264, 31.6915586489715, 0],
      [118.5422284287795, 31.6915194119098, 0],
      [118.5421320503537, 31.69136298795967, 0],
      [118.5420743897702, 31.69120716800226, 0],
      [118.5418794333221, 31.69062637517729, 0],
      [118.5416666116901, 31.69050773530868, 0],
      [118.5408273888707, 31.69080408410956, 0],
      [118.5407078497773, 31.69084099912289, 0],
      [118.5395971073972, 31.69188257529878, 0],
      [118.5390457663999, 31.69265407728168, 0]
    ],
    8,
    "K34+000~K34+300",
    "2.7mm",
    "沉降较缓",
    9,
    "K34+000~K34+300"
  )
  addlx(
    graphicLayer,
    [
      [118.5382225595952, 31.68996628522878, 0],
      [118.5380480893322, 31.69125851557519, 0],
      [118.5377499426484, 31.69274494907024, 0],
      [118.537503645258, 31.69348336988305, 0]
    ],
    99,
    "K34+000~K34+300"
  )
  addstart(graphicLayer, [118.5382225595952, 31.68996628522878, 0], "K34+000")
  addstart(graphicLayer, [118.537503645258, 31.69348336988305, 0], "K34+300")

  graphicLayer.bindContextMenu([
    {
      text: "开始编辑对象",
      show: function (e) {
        const graphic = e.graphic
        if (!graphicLayer || !graphic.startEditing) {
          return false
        }
        return !graphic.isEditing
      },
      callback: (e) => {
        const graphic = e.graphic
        if (!graphic) {
          return false
        }
        if (graphic) {
          graphicLayer.startEditing(graphic)
        }
      }
    },
    {
      text: "停止编辑对象",
      icon: "fa fa-edit",
      show: function (e) {
        const graphic = e.graphic
        if (!graphic) {
          return false
        }
        return graphic.isEditing
      },
      callback: (e) => {
        const graphic = e.graphic
        if (!graphic) {
          return false
        }
        if (graphic) {
          graphicLayer.stopEditing(graphic)
        }
      }
    }
  ])
  bindLayerEvent()
}
export function onUnmounted() {
  map.getLayer(1000, "id").show = false
  // graphicLayer.remove(true)
  // insarPoints.show = false
  //  const insarPoints =
  // insarPoints.show = false
  // graphicLayer.removeLayer()
  // graphicLayer.move()
  const insarjy11 = map.getLayerById(20221)
  insarjy11.show = false

  map.addLayer(insarjy11)
  map.removeLayer(graphicLayer)
  map = null
  table = []

  // graphicLayer.remove()
  // graphicLayer = null
}
// function add(graphicLayer, positions, xuhao, cgyzqy, cjl, bz, id, name) {
//   const graphic = new mars3d.graphic.PolylineEntity({
//     positions: positions,
//     style: {
//       color: "red",
//       width: 6,

//       opacity: 1,

//       clampToGround: true
//     },
//     attr: {
//       xuhao: xuhao,
//       cgyzqy: cgyzqy,
//       cjl: cjl,
//       bz: bz
//     },
//     id: id,
//     name: name,
//     show: false
//   })
//   graphicLayer.addGraphic(graphic)
//   addTableItem(graphic)
// }

// function add1(graphicLayer) {
//   const graphic = new mars3d.graphic.RectangleEntity({
//     positions: [
//       [118.5386010635, 31.5153508293],
//       [118.5210517655, 31.4963015913]
//     ],
//     style: {
//       outline: false,
//       outlineWidth: 10,
//       outlineStyle: "yellow",
//       opacity: 1,
//       image: "img/insar/wsb.png",
//       clampToGround: true
//     },
//     attr: {
//       xuhao: 1,
//       cjl: "15mm",
//       bz: "沉降较缓"
//     },
//     id: 1,
//     name: "K55+000~K55+500",
//     show: true
//   })
//   graphicLayer.addGraphic(graphic)
//   // addTableItem(graphic)
// }
// function add1(graphicLayer) {
//   const graphic = new mars3d.graphic.PolylineEntity({
//     positions: [
//       [118.4767066682902, 31.37026047597006, 0],
//       [118.477640074624, 31.37133185795818, 0],
//       [118.4783304833425, 31.37250722145412, 0],
//       [118.4786609883729, 31.37291100064855, 0],
//       [118.4799516044269, 31.37326574917685, 0],
//       [118.4811370512969, 31.37325977932106, 0],
//       [118.4814602759677, 31.3725058688603, 0],
//       [118.4814867828282, 31.37234602851365, 0],
//       [118.4815334207739, 31.37082922191879, 0],
//       [118.481530592503, 31.37064191607833, 0],
//       [118.4815126595989, 31.37054770849216, 0],
//       [118.4815599129684, 31.36984058812117, 0],
//       [118.48179801317, 31.36797018195201, 0],
//       [118.4817108275861, 31.36790588977038, 0],
//       [118.481263988079, 31.36746512835334, 0],
//       [118.4812516678007, 31.36734544934921, 0],
//       [118.4806230507703, 31.36648588415716, 0],
//       [118.4804046060666, 31.36644543876238, 0],
//       [118.4788524978907, 31.36593240004159, 0],
//       [118.4787147525415, 31.36580914432997, 0],
//       [118.4782636261239, 31.36564232976599, 0],
//       [118.4776425533435, 31.3655259585563, 0],
//       [118.4766636378003, 31.36513049928309, 0],
//       [118.474844553382, 31.36435328855277, 0],
//       [118.4737465383453, 31.36412860250695, 0],
//       [118.4730884876133, 31.36461410983425, 0],
//       [118.4720811627835, 31.36621503067528, 0],
//       [118.4728699182083, 31.36738913997636, 0],
//       [118.4746108782577, 31.36888919084459, 0],
//       [118.4760245606249, 31.36954274415424, 0],
//       [118.4767066682902, 31.37026047597006, 0]
//     ],
//     style: {
//       color: "red",
//       width: 6,

//       opacity: 1,
//       // image: "img/insar/wsb.png",
//       clampToGround: true
//     },
//     attr: {
//       xuhao: 1,
//       cjl: "15mm",
//       bz: "沉降较缓",
//       cgyzqy: "K55+000~K55+500"
//     },
//     id: 1,
//     name: "K55+000~K55+500",
//     show: false
//   })
//   graphicLayer.addGraphic(graphic)
//   addTableItem(graphic)
// }
/// ////////////////
function add(graphicLayer, positions, xuhao, cgyzqy, cjl, bz, id, name) {
  const graphic = new mars3d.graphic.PolylineEntity({
    positions: positions,
    style: {
      color: "red",
      width: 6,

      opacity: 1,

      clampToGround: true
    },
    attr: {
      xuhao: xuhao,
      cgyzqy: cgyzqy,
      cjl: cjl,
      bz: bz
    },
    id: id,
    name: name,
    show: false
  })
  graphicLayer.addGraphic(graphic)
  addTableItem(graphic)
}
function addlx(graphicLayer, positions, id, name) {
  const graphic = new mars3d.graphic.PolylineEntity({
    positions: positions,
    style: {
      color: "skyblue",
      width: 3,
      opacity: 1,
      clampToGround: true
    },
    id: id,
    name: name,
    show: true
  })
  graphicLayer.addGraphic(graphic)
}
function addstart(graphicLayer, position, text) {
  const graphic = new mars3d.graphic.PointEntity({
    position: position,
    style: {
      color: "#ff0000",
      pixelSize: 10,
      outline: true,
      outlineColor: "#ffffff",
      outlineWidth: 2,
      label: {
        text: text,
        font_size: 18,
        color: "#ffffff",
        pixelOffsetY: -50,
        distanceDisplayCondition: true,
        distanceDisplayCondition_far: 200000,
        distanceDisplayCondition_near: 0
      },
      clampToGround: true
    },
    attr: { remark: "示例2" }
  })
  graphicLayer.addGraphic(graphic)
}
// function add1start(graphicLayer) {
//   const graphic = new mars3d.graphic.PointEntity({
//     position: [118.4743931136167, 31.37336369974967, 0],
//     style: {
//       color: "#ff0000",
//       pixelSize: 10,
//       outline: true,
//       outlineColor: "#ffffff",
//       outlineWidth: 2,
//       label: {
//         text: "k55+500",
//         font_size: 18,
//         color: "#ffffff",
//         pixelOffsetY: -50,
//         distanceDisplayCondition: true,
//         distanceDisplayCondition_far: 200000,
//         distanceDisplayCondition_near: 0
//       }
//     },
//     attr: { remark: "示例2" }
//   })
//   graphicLayer.addGraphic(graphic)
// }
// function add1end(graphicLayer) {
//   const graphic = new mars3d.graphic.PointEntity({
//     position: [118.5207367616468, 31.50265478436276, 0],
//     style: {
//       color: "#ff0000",
//       pixelSize: 10,
//       outline: true,
//       outlineColor: "#ffffff",
//       outlineWidth: 2,
//       label: {
//         text: "k54+300",
//         font_size: 18,
//         color: "#ffffff",
//         pixelOffsetY: -50,
//         distanceDisplayCondition: true,

//         distanceDisplayCondition_far: 200000,
//         distanceDisplayCondition_near: 0
//       }
//     },
//     attr: { remark: "示例2" }
//   })
//   graphicLayer.addGraphic(graphic)
// }

let table = []
function addTableItem(item) {
  table.push({ key: item.id, cgyzqy: item.attr.cgyzqy, cjl: item.attr.cjl, bz: item.attr.bz, xuhao: item.attr.xuhao })
  eventTabel.fire("tableObject", { table })
}
export function changeTable(data) {
  table = data
}
export function showHideArea(id, selected) {
  const graphic = graphicLayer.getGraphicById(id)
  if (selected) {
    graphic.show = true
  } else {
    graphic.show = false
  }
}
export function flyToGraphic(item) {
  const graphic = graphicLayer.getGraphicById(item)
  const options = { pitch: -90, radius: 250, heading: 30, roll: 90 }
  map.flyToGraphic(graphic, options)
}
export function deletedGraphic(item) {
  const graphic = graphicLayer.getGraphicById(item)
  graphicLayer.removeGraphic(graphic)
}

function bindLayerEvent() {
  graphicLayer.on(mars3d.EventType.drawCreated, function (e) {
    eventTabel.fire("graphicEditor-start", e)
  })

  graphicLayer.on(
    [mars3d.EventType.editStart, mars3d.EventType.editMovePoint, mars3d.EventType.editStyle, mars3d.EventType.editRemovePoint],
    function (e) {
      eventTabel.fire("graphicEditor-update", e)
    }
  )

  graphicLayer.on([mars3d.EventType.editStop, mars3d.EventType.removeGraphic], function (e) {
    eventTabel.fire("graphicEditor-stop", e)
  })
}
